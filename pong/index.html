<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pong Game</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: #0F0F0F;
      color: white;
      font-family: Arial, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    canvas {
      border: 2px solid #333;
      background: #0F0F0F;
      display: block;
    }

    #controls {
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      background-color: #ff007f;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #cc0066;
    }

    #score {
      font-size: 20px;
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div id="score">0 : 0</div>
  <canvas width="750" height="585" id="game"></canvas>

  <div id="controls">
    <button onclick="togglePause()">Pause</button>
    <button onclick="goToMenu()">Back to Menu</button>
  </div>

  <script>
    const canvas = document.getElementById('game');
    const context = canvas.getContext('2d');
    const scoreDisplay = document.getElementById('score');

    const grid = 15;
    const paddleHeight = grid * 5;
    const maxPaddleY = canvas.height - grid - paddleHeight;

    let paddleSpeed = 6;
    let ballSpeed = 5;

    const leftPaddle = { x: grid * 2, y: canvas.height / 2 - paddleHeight / 2, width: grid, height: paddleHeight, dy: 0 };
    const rightPaddle = { x: canvas.width - grid * 3, y: canvas.height / 2 - paddleHeight / 2, width: grid, height: paddleHeight, dy: 0 };

    const ball = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      width: grid,
      height: grid,
      dx: ballSpeed,
      dy: -ballSpeed,
      resetting: false
    };

    let leftScore = 0;
    let rightScore = 0;
    let paused = false;

    function collides(obj1, obj2) {
      return obj1.x < obj2.x + obj2.width &&
             obj1.x + obj1.width > obj2.x &&
             obj1.y < obj2.y + obj2.height &&
             obj1.y + obj1.height > obj2.y;
    }

    function resetBall() {
      ball.x = canvas.width / 2;
      ball.y = canvas.height / 2;
      ball.dx *= -1;
    }

    function update() {
      if (paused) return;

      leftPaddle.y += leftPaddle.dy;
      rightPaddle.y += rightPaddle.dy;

      leftPaddle.y = Math.max(grid, Math.min(maxPaddleY, leftPaddle.y));
      rightPaddle.y = Math.max(grid, Math.min(maxPaddleY, rightPaddle.y));

      ball.x += ball.dx;
      ball.y += ball.dy;

      if (ball.y < grid || ball.y + grid > canvas.height - grid) {
        ball.dy *= -1;
      }

      if ((ball.x < 0 || ball.x > canvas.width) && !ball.resetting) {
        ball.resetting = true;

        if (ball.x < 0) rightScore++;
        else leftScore++;

        updateScore();

        setTimeout(() => {
          ball.resetting = false;
          resetBall();
        }, 500);
      }

      if (collides(ball, leftPaddle)) {
        ball.dx *= -1;
        ball.x = leftPaddle.x + leftPaddle.width;
      } else if (collides(ball, rightPaddle)) {
        ball.dx *= -1;
        ball.x = rightPaddle.x - ball.width;
      }
    }

    function draw() {
      context.clearRect(0, 0, canvas.width, canvas.height);

      context.fillStyle = 'white';
      context.fillRect(leftPaddle.x, leftPaddle.y, leftPaddle.width, leftPaddle.height);
      context.fillRect(rightPaddle.x, rightPaddle.y, rightPaddle.width, rightPaddle.height);
      context.fillRect(ball.x, ball.y, ball.width, ball.height);

      context.fillStyle = 'grey';
      context.fillRect(0, 0, canvas.width, grid);
      context.fillRect(0, canvas.height - grid, canvas.width, grid);

      for (let i = grid; i < canvas.height - grid; i += grid * 2) {
        context.fillRect(canvas.width / 2 - grid / 2, i, grid, grid);
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    function updateScore() {
      scoreDisplay.textContent = `${leftScore} : ${rightScore}`;
    }

    function togglePause() {
      paused = !paused;
    }

    function goToMenu() {
      window.location.href = '../index.html';
    }

    document.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp') rightPaddle.dy = -paddleSpeed;
      else if (e.key === 'ArrowDown') rightPaddle.dy = paddleSpeed;
      if (e.key.toLowerCase() === 'w') leftPaddle.dy = -paddleSpeed;
      else if (e.key.toLowerCase() === 's') leftPaddle.dy = paddleSpeed;
      if (e.key.toLowerCase() === 'p') togglePause();
    });

    document.addEventListener('keyup', e => {
      if (['ArrowUp', 'ArrowDown'].includes(e.key)) rightPaddle.dy = 0;
      if (['w', 's'].includes(e.key.toLowerCase())) leftPaddle.dy = 0;
    });

    // Start loop
    updateScore();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
<header>Welcome to Games4agahs ✨</header>
<nav>
  <a href="#" onclick="launchGame('pong')">Play Pong</a>
  <a href="#" onclick="launchGame('snake')">Play Snake</a>
</nav>

<iframe id="gameFrame" width="800" height="600" style="display:none;"></iframe>

<footer>Made by HajiAgah3291 © 2025</footer>

<script>
  function launchGame(game) {
    const frame = document.getElementById('gameFrame');
    frame.style.display = 'block';
    if (game === 'pong') frame.src = 'pong/index.html';
    else if (game === 'snake') frame.src = 'snake/index.html';
  }
</script>
